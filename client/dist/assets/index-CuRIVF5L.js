(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const l=document.getElementById("search-form"),m=document.getElementById("search-input"),u=document.querySelector("#today"),d=document.querySelector("#forecast"),p=document.getElementById("history"),h=document.getElementById("search-title"),a=document.getElementById("weather-img"),E=document.getElementById("temp"),g=document.getElementById("wind"),w=document.getElementById("humidity"),C=async n=>{const c=await(await fetch("/api/weather/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cityName:n})})).json();console.log("weatherData: ",c),v(c[0]),S(c.slice(1))},v=n=>{const{city:t,date:c,icon:r,iconDescription:e,tempF:o,windSpeed:i,humidity:s}=n;h.textContent=`${t} (${c})`,a.setAttribute("src",`https://openweathermap.org/img/w/${r}.png`),a.setAttribute("alt",e),a.setAttribute("class","weather-img"),h.append(a),E.textContent=`Temp: ${o}°F`,g.textContent=`Wind: ${i} MPH`,w.textContent=`Humidity: ${s} %`,u&&(u.innerHTML="",u.append(h,E,g,w))},S=n=>{const t=document.createElement("div"),c=document.createElement("h4");t.setAttribute("class","col-12"),c.textContent="5-Day Forecast:",t.append(c),d&&(d.innerHTML="",d.append(t));for(let r=0;r<n.length;r++)$(n[r])},$=n=>{console.log("here is forecast: ",n);const{date:t,icon:c,iconDescription:r,tempF:e,windSpeed:o,humidity:i}=n,{col:s,cardTitle:b,weatherIcon:f,tempEl:L,windEl:I,humidityEl:x}=B();b.textContent=t,f.setAttribute("src",`https://openweathermap.org/img/w/${c}.png`),f.setAttribute("alt",r),L.textContent=`Temp: ${e} °F`,I.textContent=`Wind: ${o} MPH`,x.textContent=`Humidity: ${i} %`,d&&d.append(s)},B=()=>{const n=document.createElement("div"),t=document.createElement("div"),c=document.createElement("div"),r=document.createElement("h5"),e=document.createElement("img"),o=document.createElement("p"),i=document.createElement("p"),s=document.createElement("p");return n.append(t),t.append(c),c.append(r,e,o,i,s),n.classList.add("col-auto"),t.classList.add("forecast-card","card","text-white","bg-primary","h-100"),c.classList.add("card-body","p-2"),r.classList.add("card-title"),o.classList.add("card-text"),i.classList.add("card-text"),s.classList.add("card-text"),{col:n,cardTitle:r,weatherIcon:e,tempEl:o,windEl:i,humidityEl:s}},F=n=>{if(n.preventDefault(),!m.value)throw new Error("City cannot be blank");const t=m.value.trim();C(t).then(()=>{y()}),m.value=""},A=n=>{if(n.target.matches(".history-btn")){const t=n.target.textContent;C(t).then(y)}},y=()=>l==null?void 0:l.addEventListener("submit",F);p==null||p.addEventListener("click",A);y();
